重试的时候不能简单的去重试,会给下游带来对应的风暴
1. 可以让重试的次数和这段时间中整体请求的数量相关,例如重试的数量不能超过整体的10%
2. 对于重试间隔,rpc倾向立刻重试,移动端等连接失败的时候,倾向做退避,在一定随机的时间之后再进行重试,避免给服务端造成波峰
3. client侧记录重试次数直方图,传递到server,进行分布判定,交由server判定拒绝
4. 只应该在失败的这层进行重试,当重试仍然失败,全局约定错误码"过载,无需重试",避免级联重试